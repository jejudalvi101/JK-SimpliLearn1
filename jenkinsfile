pipeline{

 environment {
    registry = "jejudalvi101/jenkinspipeline_dockerfile_image_build"
    registryCredential = 'dockerhub'
  }
    agent any
        
    stages 
    {
            stage('Build java application') 
            {
            
                steps 
                {
                    echo 'Building..'
                    sh 'mvn package'
                }
            }


            stage('Cloning Git') {
              steps {
                git 'https://github.com/gustavoapolinario/microservices-node-example-todo-frontend.git'
              }
            }

         stage('Building Docker image') {
              steps{
                script {
                  docker.build registry + ":$BUILD_NUMBER"
                }
              }
         }


    }
}
