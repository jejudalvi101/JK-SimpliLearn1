pipeline{

 environment {
    registry = "docker_hub_account/repository_name"
    registryCredential = 'dockerhub'
  }
    agent any
        
    stages 
    {
            stage('Build java application') 
            {
            
                steps 
                {
                    echo 'Building..'
                    sh 'mvn package'
                }
            }

            stage('Test') 
            {
            
                steps 
                {
                    echo 'Testing..'
                    
                }
            }

         stage('Building Docker image') {
              steps{
                script {
                  docker.build registry + ":$BUILD_NUMBER"
                }
              }
         }


    }
}
